<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- Bing Validate -->
    <meta name="msvalidate.01" content="846642D2B12ABB4747D70776D2056651"/>
    <!-- Google Webmaster Validate -->
    <meta name="google-site-verification" content="uUeOdHBzl0nbyvdyeRHKGIHPxnIpJDTTnWv-QfgkxRs" />
    <meta property="og:title" content="Midtrans Payments || Tech Docs for online payment system"/>
    <meta property="og:site_name" content="Midtrans"/>
    <meta property="og:description" content="Technical Documentation to implement online payment system. Available for various payment methods, in various website programming language."/>
    <meta property="fb:app_id" content="404252079606310"/>
    <meta property="og:image" content="//docs.midtrans.com/images/midtrans/favicon/apple-touch-icon-120x120.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online">
    <meta name="google-site-verification" content="uUeOdHBzl0nbyvdyeRHKGIHPxnIpJDTTnWv-QfgkxRs" />
    <meta name="msvalidate.01" content="846642D2B12ABB4747D70776D2056651">

    <link href="../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="../../stylesheets/materialize.css" media="screen" rel="stylesheet" type="text/css" />

    <title>Midtrans Payments - Tech Docs for online payment system</title>
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/images/midtrans/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/midtrans/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/midtrans/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/midtrans/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/midtrans/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/midtrans/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/midtrans/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/midtrans/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/midtrans/favicon/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/midtrans/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/images/midtrans/favicon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/midtrans/favicon/favicon-16x16.png">
    <link rel="shortcut icon" href="https://midtrans.com/assets/images/favicon.ico">
    <script src="../../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="../../javascripts/materialize.min.js" type="text/javascript"></script>

    <!-- start Mixpanel -->
    <script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
        for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
        mixpanel.init("f93e9c92cf8729b32c4491fb6794689b");
    </script>
    <!-- end mixpanel -->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <header class="md-header position-fixed-top header-white affix">
  <div class="container position-static">
    <div class="row position-static">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 position-static">
        <a class="logo-midtrans" href="https://midtrans.com/">Midtrans</a>
        <div id="nav-toggle" class="collapsed" data-toggle="collapse" data-target="#main-nav" aria-expanded="false">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="nav-wrapper collapse" id="main-nav" aria-expanded="false">
          <div class="inner-wrapper">
            <ul class="mobile-nav">
              <li><span class="nav-title">SERVICES</span></li>
              <li>
                <a href="https://midtrans.com/payments">
                  <img class="logo-image" src="../../images/midtrans/logo-midtrans-white.png" alt="midtrans"/>
                </a>
              </li>
              <li>
                <a href="https://midtrans.com/aegis">
                  <img class="logo-image" src="../../images/midtrans/logo-aegis-white.png" alt="aegis"/>
                </a>
              </li>
              <li>
                <a href="https://midtrans.com/iris">
                  <img class="logo-image" src="../../images/midtrans/logo-iris-white.png" alt="iris"/>
                </a>
              </li>
              <li><span class="nav-space"></span></li>
              <li class="half"><a href="https://midtrans.com/payments/pricing">Pricing</a></li>
              <li class="half"><a href="https://midtrans.com/contact">Contact Us</a></li>
              <li class="half"><a href="https://midtrans.com/developers">Documentation</a></li>
              <li class="half"><a href="https://midtrans.com/developers">FAQ</a></li>
              <li class="half"><a href="https://support.midtrans.com/hc/en-us">Clients</a></li>
              <li><span class="nav-space" /></li>
              <li>
                <a class="login" href="https://account.midtrans.com/login" target="_blank" rel="noopener noreferrer">login</a>
              </li>
              <li>
                <a class="signup" href="https://midtrans.com/tentang-passport" target="_blank" rel="noopener noreferrer">
                  SIGN UP
                </a>
              </li>
            </ul>
          </div>
        </div>
        <ul class="md-nav">
          <li class="dropdown">
            <a>
              Our Services
              <span class="fa fa-angle-down"></span>
            </a>
            <div class="dropdown-menu md-dd-nav">
              <div class="container">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="row">
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-description">
                          <h3>Services</h3>
                          <p>Midtrans menyediakan beragam solusi untuk bisnis online Anda.</p>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/payments">
                            <img class="image" src="../../images/midtrans/logo-midtrans-color.png" alt="">
                            <p>Sistem pembayaran online yang terhubung dengan berbagai metode pembayaran di Indonesia.</p>
                          </a>
                          <a class="link" href="https://midtrans.com/payments">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/aegis">
                            <img class="image" src="../../images/midtrans/logo-aegis.png" alt="">
                            <p>Sistem deteksi fraud untuk menganalisis dan mencegah penipuan di eCommerce Anda.</p>
                          </a>
                          <a class="link" href="https://midtrans.com/aegis">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/iris">
                            <img class="image" src="../../images/midtrans/logo-iris.png" alt="">
                            <p>Sistem distribusi pembayaran untuk kemudahan pengiriman dana ke semua bank di Indonesia.</p>
                          </a>
                          <a class="link" href="https://midtrans.com/iris">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a>
              Getting Started
              <span class="fa fa-angle-down"></span>
            </a>
            <div class="dropdown-menu md-dd-nav">
              <div class="container">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="row">
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-description">
                          <h3>Getting Started</h3>
                          <p>Berbagai informasi yang dibutuhkan untuk terhubung dengan layanan Midtrans.</p>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/pricing">
                            <h4>Pricing</h4>
                            <p>Informasi tentang harga dari berbagai layanan Midtrans.</p>
                          </a>
                          <a class="link" href="https://midtrans.com/payments/pricing">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/developers">
                            <h4>Documentation</h4>
                            <p>Dokumentasi teknis yang terbuka dari berbagai layanan Midtrans.</p>
                          </a>
                          <a class="link" href="https://midtrans.com/developers">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/clients">
                            <h4>Clients</h4>
                            <p>Kisah sukses berbagai bisnis online yang terhubung dengan Midtrans.</p>
                          </a>
                          <a class="link" href="https://midtrans.com/clients">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </li>
          <li class="dropdown">
            <a>
              Support
              <span class="fa fa-angle-down"></span>
            </a>
            <div class="dropdown-menu md-dd-nav">
              <div class="container">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="row">
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-description">
                          <h3>Support</h3>
                          <p>Bantuan teknis dari tim Midtrans untuk memudahkan proses integrasi Anda.</p>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/pricing">
                            <h4>Contact Us</h4>
                            <p>Hubungi tim support Midtrans untuk pertanyaan lebih lanjut.</p>
                          </a>
                          <a class="link" href="https://midtrans.com/contact">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
                        <div class="submenu-link">
                          <a class="summary" href="https://midtrans.com/developers">
                            <h4>FAQ</h4>
                            <p>Informasi penting mengenai layanan dan proses integrasi dengan Midtrans.</p>
                          </a>
                          <a class="link" href="https://support.midtrans.com/hc/en-us">Selengkapnya &rarr;</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </li>
          <li>
            <a class="login" href="https://account.midtrans.com/login" target="_blank" rel="noopener noreferrer">
              login
            </a>
          </li>
          <li>
            <a class="signup" href="https://midtrans.com/tentang-passport" target="_blank" rel="noopener noreferrer">
              SIGN UP
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
<div class="nav-overlay"></div>

    <div class="custom-container container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas" id="sidebar" role="navigation">

    <div class="documentation-sidebar affix">
        <div class="docs-logo">
            <span>DOCS</span>
        </div>
        <div class="language-toggle"> English / <a href="../../id/core_api/integration_gopay.html">Bahasa Indonesia</a></div>
        <div class="sidebar-search">
          <form>
            <input type="search" name="q" id="search-field" placeholder="Search">
          </form>
        </div>
        <ul class="sidebar">
            
                <li>
                    
                        <a class="parent">Getting Started</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../welcome/index.html">Introduction</a></li>
                            
                            <li class=""><a href="../welcome/preparation.html">Preparation</a></li>
                            
                            <li class=""><a href="../welcome/pluginlibrary.html">Library & Plugin</a></li>
                            
                            <li class=""><a href="../welcome/partner_integ.html">Affiliated Platforms</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent">SNAP</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../snap/integration.html">Integration</a></li>
                            
                            <li class=""><a href="../snap/other_features.html">Other Features</a></li>
                            
                            <li class=""><a href="../snap/going_live.html">Going Live</a></li>
                            
                            <li class=""><a href="http://snap-docs.midtrans.com">Snap API</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="https://mobile-docs.midtrans.com">Mobile SDK</a>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="../payment_link/index.html">Payment Link</a>
                    
                </li>
            
                <li>
                    
                        <a class="parent">Core API</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="integration_card_basic.html">Card Payment Integration</a></li>
                            
                            <li class="active"><a href="integration_gopay.html">GoPay Integration</a></li>
                            
                            <li class=""><a href="integration_bank_transfer.html">Bank Transfer Integration</a></li>
                            
                            <li class=""><a href="integration_direct_debit.html">Direct Debit Integration</a></li>
                            
                            <li class=""><a href="https://api-docs.midtrans.com">Other Payment Channel</a></li>
                            
                            <li class=""><a href="https://api-docs.midtrans.com">Core API Docs</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent">Reference</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../reference/test.html">Testing Credential</a></li>
                            
                            <li class=""><a href="../reference/address.html">IP Adresses</a></li>
                            
                            <li class=""><a href="../reference/security.html">Security</a></li>
                            
                            <li class=""><a href="https://status.midtrans.com">System Status</a></li>
                            
                            <li class=""><a href="../reference/docslog.html">Docs Changelog</a></li>
                            
                            <li class=""><a href="https://support.midtrans.com">FAQ</a></li>
                            
                        </ul>
                    
                </li>
            
        </ul>
        <p class="question">
            Something is missing from the docs?<br>
            <a href="https://github.com/veritrans/veritrans.github.io">Open an issue or contribute to the docs on Github</a>
        </p>
    </div>
</div>

        <div class="col-xs-12 col-sm-8 col-md-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="en-core-api-integration-gopay">
            <h2 id="gopay-integration">GoPay Integration</h2>

<p>GoPay is an e-Wallet payment method by Gojek. Users will pay using the Gojek apps. The user flow varies when using a web browser (on a computer or a tablet) compared to a SmartPhone:</p>

<ol>
  <li><strong>QR Code</strong> - This is the user flow on a web browser (on a computer or a tablet). User is shown a QR code and asked to scan using the Gojek apps.</li>
  <li><strong>Deeplink</strong> - This is the user flow on a SmartPhone/mobile device. User gets redirected to the Gojek apps to finish payment.</li>
</ol>

<p>Basic integration process of GoPay will be explained below.</p>

<h3 id="sandbox-environment">Sandbox Environment</h3>
<p>All the steps below are using Midtrans <strong>Sandbox</strong> environment, not Production, to easily test the integration process. Make sure you are switching to Sandbox mode on your <a href="https://account.midtrans.com">Midtrans account dashboard</a> while retrieving Server Key and Client Key. Explained in <a href="../welcome/preparation.html#step3">Getting Started - Preparation</a></p>

<p>Server Key and Client Key can be retrieved on menu <code>Settings &gt; Access Keys</code></p>

<h3 id="testing-payment">Testing Payment</h3>
<p>If you use <code>Deeplink</code>, you will be auto redirected to Gopay Simulator.</p>

<p>If you use <code>QR Code</code>, copy the QR Code image URL then use this <a href="https://simulator.sandbox.midtrans.com/qris/index">Simulator</a>.</p>

<h3 id="diagram">Diagram</h3>
<p><strong>QR Code Mode:</strong>
<br />
<img alt="qr transaction flow" class="img-responsive img-thumbnail" src="../../images/core_api/gopay_qr.png" />
.
<br />
<strong>Deeplink Mode:</strong>
<br />
<img alt="deeplink transaction flow" class="img-responsive img-thumbnail" src="../../images/core_api/gopay_deeplink.png" />
.
<br /><br /></p>

<h2 id="integration-step">Integration Step</h2>
<ol>
  <li>Send transaction data to API Charge.</li>
  <li>Alter payment flow depending on the device used:
    <ul>
      <li>Show QR code image (on a computer or a tablet).</li>
      <li>Create redirect link to Gojek apps (on SmartPhone).</li>
      <li>Implementing GoPay deeplink callback.</li>
    </ul>
  </li>
  <li>Handle transaction notification.
<br /><br /></li>
</ol>

<h2 id="send-transaction-data-to-api-charge">1. Send Transaction Data to API Charge</h2>
<p>Charge API request should be done from Merchant's backend. <strong>Server Key</strong> (from your account's <a href="https://account.midtrans.com">Dashboard</a>) will be needed to <a href="https://api-docs.midtrans.com/#http-s-header">authenticate the request</a>.</p>

<h3 id="charge-api-request">Charge API request</h3>
<p>This is example of <code>/charge</code> API request in Curl, please implement according to your backend language (you can also check our available <a href="../welcome/pluginlibrary.html">language libraries</a>).</p>

<pre><code class="highlight shell"><span class="c"># sample charge in CURL</span>
curl -X POST <span class="se">\</span>
  https://api.sandbox.midtrans.com/v2/charge <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Basic &lt;YOUR SERVER KEY ENCODED in Base64&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{
  "payment_type": "gopay",
  "transaction_details": {
      "order_id": "order-101",
      "gross_amount": 44000
  }
  "gopay": {
      "enable_callback": true,                //optional
      "callback_url": "someapps://callback"   //optional
  }
}'</span>
</code></pre>

<p>Optional: you can customize <a href="https://api-docs.midtrans.com/#json-object">transaction_details data</a>. To include data like customer_details, item_details, etc. It's recommended to send as much detail so on report/dashboard those information will be included.</p>

<h3 id="charge-api-response">Charge API response</h3>
<p>You will get the <strong>API response</strong> like the following.</p>

<pre><code class="highlight json"><span class="p">{</span>
  <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"201"</span><span class="p">,</span>
  <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"GO-PAY transaction is created"</span><span class="p">,</span>
  <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"231c79c5-e39e-4993-86da-cadcaee56c1d"</span><span class="p">,</span>
  <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"order-101h-1570513296"</span><span class="p">,</span>
  <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"44000.00"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"IDR"</span><span class="p">,</span>
  <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"gopay"</span><span class="p">,</span>
  <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2019-10-08 12:41:36"</span><span class="p">,</span>
  <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"pending"</span><span class="p">,</span>
  <span class="s2">"fraud_status"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">,</span>
  <span class="s2">"actions"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"generate-qr-code"</span><span class="p">,</span>
        <span class="s2">"method"</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
        <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://api.sandbox.veritrans.co.id/v2/gopay/231c79c5-e39e-4993-86da-cadcaee56c1d/qr-code"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"deeplink-redirect"</span><span class="p">,</span>
        <span class="s2">"method"</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
        <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://simulator.sandbox.midtrans.com/gopay/ui/checkout?referenceid=Y0xwjoQ9uy&amp;callback_url=someapps%3A%2F%2Fcallback%3Forder_id%3Dorder-101h-1570513296"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"get-status"</span><span class="p">,</span>
        <span class="s2">"method"</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
        <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://api.sandbox.veritrans.co.id/v2/231c79c5-e39e-4993-86da-cadcaee56c1d/status"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"cancel"</span><span class="p">,</span>
        <span class="s2">"method"</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://api.sandbox.veritrans.co.id/v2/231c79c5-e39e-4993-86da-cadcaee56c1d/cancel"</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>You will get the <code>actions</code> attribute which can be performed this transaction.</p>

<p><br /></p>

<h2 id="alter-payment-flow-depending-on-the-device-used">2. Alter payment flow depending on the device used</h2>

<p>The user flow varies when using a web browser (on a computer or a tablet) compared to a SmartPhone.</p>

<h3 id="show-qr-code-image-on-computer-or-tablet">Show QR Code Image (on computer or tablet)</h3>

<p>To display transaction QR Code image, use the url from <code>generate-qr-code</code> actions retrieved from API response. Simplest way is to <strong>"hotlink"</strong> the image url, if the frontend is HTML, put the url in image tag <code>&lt;img src="[QR CODE URL]"&gt;</code>, or display it on a similar component without downloading.</p>

<p>If the frontend does not support such scenario, download the QR code image from that url, then display it on frontend.</p>

<p>Instruction Example for <strong>QR Code</strong> :</p>

<ol>
  <li>Tap <strong>Pay using GoPay</strong></li>
  <li>QR code will appear on the next page</li>
  <li>Open <strong>Gojek</strong> app on your mobile phone</li>
  <li>Tap <strong>Pay</strong> then scan the QR Code</li>
  <li>Check and verify your payment details then tap <strong>PAY</strong></li>
  <li>Enter your security <strong>PIN</strong></li>
  <li>Your transaction is finished</li>
</ol>

<p><img alt="GoPay QR Instruction" class="img-responsive img-thumbnail" src="../../images/core_api/gopay_qr_pay.png" /></p>

<h3 id="create-redirect-link-to-gojek-apps-on-smartphone">Create Redirect Link to Gojek Apps (on SmartPhone)</h3>

<p>To redirect customer to Gojek app, use the url from <code>deeplink-redirect</code> actions retrieved from API response.</p>

<p>Then customer can be redirected via server-side redirect, using javascript like <code>window.location=[DEEPLINK URL]</code>, or using HTML link <code>&lt;a href="[DEEPLINK URL]"&gt;Pay with GoPay&lt;/a&gt;</code>.</p>

<p>Instruction Example for <strong>Deeplink</strong> :</p>

<ol>
  <li>Tap <strong>Pay using GoPay</strong></li>
  <li>You will be redirected to <strong>Gojek</strong> app</li>
  <li>Check and verify your payment details then tap <strong>Pay</strong></li>
  <li>Enter your security <strong>PIN</strong></li>
  <li>Your transaction is finished</li>
</ol>

<p><img alt="GoPay Deeplink Instruction" class="img-responsive img-thumbnail" src="../../images/core_api/gopay_deeplink_pay.png" /></p>

<h3 id="implementing-gopay-deeplink-callback">Implementing GoPay Deeplink Callback</h3>

<p>In addition to the standard mobile apps flow, you may opt to implement a deeplink callback to redirect customer back from Gojek to their apps.</p>

<p>Please add gopay parameter in the <code>/charge</code> API request</p>

<pre><code class="highlight json">  <span class="s2">"gopay"</span><span class="err">:</span> <span class="p">{</span>
      <span class="s2">"enable_callback"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">"callback_url"</span><span class="p">:</span> <span class="s2">"someapps://callback"</span> <span class="c1">//you can also use web url like https://myshop.com/finish</span>
  <span class="p">}</span>
</code></pre>

<table>
  <thead>
    <tr>
      <th>JSON Attribute</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>enable_callback</td>
      <td>Boolean</td>
      <td>To determine appending callback url in the deeplink. Default value: <code>false</code>.</td>
    </tr>
    <tr>
      <td>callback_url</td>
      <td>String</td>
      <td>To determine where Gojek apps will redirect after successful payment. Can be HTTP or deeplink url. Default value: <code>callback_url</code> in dashboard settings.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>You needs to prepare a <code>callback_url</code> which accept two query parameters</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>order_id</td>
      <td>String</td>
      <td>Order ID sent on the Charge Request.</td>
    </tr>
    <tr>
      <td>result</td>
      <td>String</td>
      <td>Result of the transaction to decide what kind of page to show to customer. Possible values: <code>success</code> or <code>failure</code>.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<div class="alert alert-warning" role="alert">
  <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"> IMPORTANT!</span>
  <span class="sr-only">Warning!</span>
 <br />To update transaction status on your backend/database, DO NOT solely rely on frontend callbacks! For security reason to make sure the status is authentically coming from Midtrans, only update transaction status based on HTTP Notification or <a href="https://api-docs.midtrans.com/#get-transaction-status">API Get Status</a>.
</div>
<p><br /></p>

<h2 id="handle-http-notification">3. Handle HTTP Notification</h2>

<p>HTTP notification from Midtrans to Merchant backend will also be triggered on event of <code>transaction_status</code> getting updated, to ensure merchant is securely informed. Including if transaction success or expired (not paid). So apart of JSON result above, Merchant backend will be notified by Midtrans.</p>

<p>HTTP POST request with JSON body will be sent to Merchant's <strong>notification url</strong> configured on <a href="https://account.midtrans.com">dashboard</a> (Settings &gt; Configuration &gt; Notification URL), this is the sample JSON body that will be received by Merchant:</p>

<pre><code class="highlight json"><span class="p">{</span>
  <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
  <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"midtrans payment notification"</span><span class="p">,</span>
  <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"1c28dbbb-8596-48e4-85d7-9f1382db8a1f"</span><span class="p">,</span>
  <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"order03"</span><span class="p">,</span>
  <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"275000.00"</span><span class="p">,</span>
  <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"gopay"</span><span class="p">,</span>
  <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2016-06-19 15:54:42"</span><span class="p">,</span>
  <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"settlement"</span><span class="p">,</span>
  <span class="s2">"signature_key"</span><span class="p">:</span> <span class="s2">"973d175e6368ad844b5817882489e6b22934d796a41a0573c066b1e64532dc0001087b87d877a3eac37cba20a733e1305f5e62739e65ff501d5d33c5ac62530f"</span>
<span class="p">}</span>
</code></pre>

<p>Refer <a href="https://api-docs.midtrans.com/#handing-notifications">here on more details of how to handle HTTP Notification</a>.
<br /><br /></p>

<h2 id="switching-to-production">Switching To Production</h2>

<p>To use Midtrans production environment (accept real payment from real customer), please make sure to:</p>

<ol>
  <li>Switch the API domain URL from <code>api.sandbox.midtrans.com</code> to <code>api.midtrans.com</code></li>
  <li>Switch the Client Key and Server Key from sandbox Dashboard, with keys from production Dashboard.
<br /><br /></li>
</ol>

<h2 id="done">Done</h2>

<p>The GoPay payment integration guide is now complete. Below are some further references.
<br /><br /></p>

<h2 id="additional-notes">Additional Notes</h2>

<p>If GoPay deeplink is being used on SmartPhone application (Android/iOS app), there are additional configurations you may need to add to ensure your app able to redirect customer to Gojek app.</p>

<p>On <strong>Android</strong> if using Webview, please make sure that the Webview allow opening <code>gojek://</code> deeplink protocol.</p>

<p>You need to modify your web view <code>shouldOverrideUrlLoading</code> functions as follows:</p>

<pre><code class="highlight java"> <span class="nd">@Override</span>
 <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">shouldOverrideUrlLoading</span><span class="o">(</span><span class="n">WebView</span> <span class="n">view</span><span class="o">,</span> <span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">LogUtils</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"shouldOverrideUrlLoading: "</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>
        <span class="n">Intent</span> <span class="kt">int</span><span class="n">ent</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"gojek://"</span><span class="o">))</span> <span class="o">{</span>
            <span class="kt">int</span><span class="n">ent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span><span class="o">);</span>
            <span class="kt">int</span><span class="n">ent</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">url</span><span class="o">));</span>
            <span class="n">startActivity</span><span class="o">(</span><span class="kt">int</span><span class="n">ent</span><span class="o">);</span>

            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> 
 <span class="o">}</span>
</code></pre>

<p>On <strong>iOS</strong>, you will need to add <code>LSApplicationQueriesSchemes</code> key to your app's <code>Info.plist</code>.</p>

<pre><code class="highlight xml"><span class="nt">&lt;key&gt;</span>LSApplicationQueriesSchemes<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;array&gt;</span>
<span class="nt">&lt;string&gt;</span>gojek<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/array&gt;</span>
</code></pre>

<p><br /></p>

<h2 id="description">Description</h2>

<p><code>transaction_status</code> value description for GoPay transaction:</p>

<table>
  <thead>
    <tr>
      <th>Transaction Status</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>settlement</code></td>
      <td>Transaction successful, customer has been completed the transaction.</td>
    </tr>
    <tr>
      <td><code>pending</code></td>
      <td>The transaction has successfully created to GoPay but has not been completed by the customer.</td>
    </tr>
    <tr>
      <td><code>expire</code></td>
      <td>Transaction failure because customer did not complete the payment within allowed time.</td>
    </tr>
    <tr>
      <td><code>cancel</code></td>
      <td>Transaction is canceled by trigger from Merchant.</td>
    </tr>
    <tr>
      <td><code>deny</code></td>
      <td>Payment provider rejected the payment code/id creation.</td>
    </tr>
    <tr>
      <td><code>refund</code></td>
      <td>Transaction is refunded by trigger from Merchant.</td>
    </tr>
  </tbody>
</table>

<p><br />
Link: <a href="https://api-docs.midtrans.com/#transaction-status"><em>More detailed definition of transaction_status</em></a></p>

<p>For more detail: <a href="https://api-docs.midtrans.com/">Complete Core API documentation</a></p>


            <div class="pagination">
              <ul><li class="left">« Previous: <a href="integration_card_basic.html">Core API : Card Payment Integration</a></li><li class="right">Next: <a href="integration_bank_transfer.html">Core API : Bank Transfer Integration</a> »</li></ul>
            </div>
          </div>
        </div><!--/span-->
      </div><!--/row-->
    </div><!--/.container-->

    <!-- attempt force redirect to HTTPS -->
    <script type="text/javascript">
      if (window.location.hostname == 'docs.midtrans.com' && 
        window.location.protocol == "http:") {
        console.log("attempt to change protocol to https");
        window.location.protocol = "https:";
      }
    </script>

    <footer class="wrapper">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
        <div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <ul class="list-unstyled footer-nav">
              <li><a href="https://midtrans.com/about">About Us</a></li>
              <li><a href="https://blog.midtrans.com" target="_blank">Blog</a></li>
              <li><a href="https://midtrans.com/campaigns">Campaigns</a></li>
              <li><a href="https://midtrans.com/careers">Careers</a></li>
              <li><a href="https://midtrans.com/clients">Clients</a></li>
              <li><a href="https://midtrans.com/contact">Contact</a></li>
              <li><a href="https://midtrans.com/developers">Developers</a></li>
              <li><a href="https://midtrans.com/security">Security</a></li>
            </ul>
          </div>
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <a href="https://midtrans.com/payments"><img src="../../images/midtrans/logo-midtrans-color.png" class="logo" alt="midtrans logo"/></a>
            <ul class="list-unstyled footer-nav">
              <li><a href="https://midtrans.com/payments/payment-channels/gopay">GO-PAY</a></li>
              <li><a href="https://midtrans.com/payments/manage">Merchant Administration Portal</a></li>
              <li><a href="https://midtrans.com/payments/payment-channels">Payment Channels</a></li>
              <li><a href="https://midtrans.com/payments/pricing">Pricing</a></li>
              <li><a href="https://docs.midtrans.com" target="_blank">Technical Documentation</a></li>
              <li><a href="https://support.midtrans.com" target="_blank">Frequently Asked Questions</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <div class="row">
          <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
            <a href="https://midtrans.com/iris"><img src="../../images/midtrans/logo-iris.png" class="logo" alt="iris logo"/></a>
            <ul class="list-unstyled footer-nav">
              <li><a href="https://midtrans.com/iris">Features</a></li>
            </ul>
          </div>
          <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
            <a href="https://midtrans.com/aegis"><img src="../../images/midtrans/logo-aegis.png" class="logo" alt="aegis logo"/></a>
            <ul class="list-unstyled footer-nav">
              <li><a href="https://midtrans.com/aegis/features">Features</a></li>
              <li><a href="https://midtrans.com/aegis/use-cases">Use Cases</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <h3>
          Berlangganan newsletter Midtrans
        </h3>
        <p>
          Dapatkan ide, informasi, dan tips menarik seputar eCommerce.
        </p>
        <form class="form-horizontal validate" id="subscriber-form" action="https://veritrans.us9.list-manage.com/subscribe/post-json?u=4ed5f88335112571098a4a51c&amp;id=12315939d2" method="get">
          <div class="input-field clearfix">
            <input type="email" value="" name="EMAIL" class="subscribe-input required email validate"
                   required="" placeholder="Email Anda">
            <button type="submit" class="btn btn-subscribe">→</button>
          </div>
          <div id="subscriber-result"></div>
        </form>
        <div class="social-media">
          <ul class="list-inline">
            <li><a href="https://www.facebook.com/Midtranscom/" target="_blank" rel="nofollow noopener noreferrer"><i class="fa fa-facebook"></i></a></li>
            <li><a href="https://twitter.com/midtrans_com" target="_blank" rel="nofollow noopener noreferrer"><i class="fa fa-twitter"></i></a></li>
            <li><a href="https://www.linkedin.com/company/midtrans" target="_blank" rel="nofollow noopener noreferrer"><i class="fa fa-linkedin"></i></a></li>
            <li><a href="https://www.instagram.com/midtrans_com/" target="_blank" rel="nofollow noopener noreferrer"><i class="fa fa-instagram"></i></a></li>
            <li><a href="https://www.youtube.com/midtrans_com" target="_blank" rel="nofollow noopener noreferrer"><i class="fa fa-youtube-play"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 credit">
        <ul class="list-inline credit-link">
          <li><a href="https://midtrans.com/press">Press</li>
          <li><a href="https://midtrans.com/privacy-policy">Privacy Policy</li>
          <li class="hide"><a href="https://midtrans.com/terms-conditions">Terms &amp; Conditions</a></li>
          <li class="copy">&copy;
            <script type="text/javascript">
              document.write(new Date().getFullYear());
            </script>
            Midtrans (PT Midtrans)
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>



    <script src="../../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../../javascripts/dropdown.js" type="text/javascript"></script>
<script src="../../javascripts/tab_custom.js" type="text/javascript"></script>
<script src="../../javascripts/useragent.js" type="text/javascript"></script>
<script src="../../javascripts/mixpanel_tracking.js" type="text/javascript"></script>
    <script src="../../javascripts/search.js" async="true" type="text/javascript"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-85529823-1', 'auto');
      ga('send', 'pageview'); 

    </script>
    <script>
      $(document).ready(function() {
        $('[data-toggle=offcanvas]').click(function() {
          $('.row-offcanvas').toggleClass('active');
        });
        $(function () {
          $('[data-toggle="tooltip"]').tooltip();
        });

        $('body, .nav-overlay').bind('click', e => {
          if ($(e.target).closest('.nav-wrapper').length == 0) {
            // click happened outside of .navbar, so hide
            var opened = $('.nav-wrapper').hasClass('in');
            if (opened === true) {
              $('.nav-wrapper').collapse('hide');
            }
          }
          if ($(e.target).closest('.sub-nav-wrapper').length == 0) {
            // click happened outside of .navbar, so hide
            var opened = $('.sub-nav-wrapper').hasClass('in');
            if (opened === true) {
              $('.sub-nav-wrapper').collapse('hide');
            }
          }
        });

        /* PAGE OVERLAY ON NAV-TOGGLE OPEN */
        $('.nav-wrapper').on('show.bs.collapse', () => {
          $('.nav-overlay').addClass('active');
        });
        $('.nav-wrapper').on('hide.bs.collapse', () => {
          $('.nav-overlay').removeClass('active');
        });

        /* PAGE OVERLAY ON NAV-TOGGLE OPEN */
        $('.sub-nav-wrapper').on('show.bs.collapse', function () {
          $('.nav-overlay').addClass('active');
        });
        $('.sub-nav-wrapper').on('hide.bs.collapse', function () {
          $('.nav-overlay').removeClass('active');
        });

        mixpanel.track('en docs page viewed',{
          'url' : location.href
        });

        ajaxMailChimpForm($("#subscriber-form"), $("#subscriber-result"));

        // Turn the given MailChimp form into an ajax version of it.
        // If resultElement is given, the subscribe result is set as html to
        // that element.
        function ajaxMailChimpForm($form, $resultElement){

          // Hijack the submission. We'll submit the form manually.
          $form.submit(function(e) {
            e.preventDefault();

            if (!isValidEmail($form)) {
              var error =  "Email Anda tidak valid. Mohon memberikan email lain.";
              $resultElement.html(error);
            } else {
              $resultElement.html("Subscribing...");
              submitSubscribeForm($form, $resultElement);
            }
          });
        }
        
        // Validate the email address in the form
        function isValidEmail($form) {
          // If email is empty, show error message.
          // contains just one @
          var email = $form.find("input[type='email']").val();
          if (!email || !email.length) {
            return false;
          } else if (email.indexOf("@") == -1) {
            return false;
          }

          return true;
        }

        // Submit the form with an ajax/jsonp request.
        // Based on http://stackoverflow.com/a/15120409/215821
        function submitSubscribeForm($form, $resultElement) {
          $.ajax({
            type: "GET",
            url: $form.attr("action"),
            data: $form.serialize(),
            cache: false,
            dataType: "jsonp",
            jsonp: "c", // trigger MailChimp to return a JSONP response
            contentType: "application/json; charset=utf-8",

            error: function(error){
              // According to jquery docs, this is never called for cross-domain JSONP requests
            },

            success: function(data){
              if (data.result != "success") {
                var message = data.msg || "Maaf, sistem sedang error. Silahkan mencoba beberapa saat lagi.";


                if (data.msg && data.msg.indexOf("already subscribed") >= 0) {
                  message = "Anda sudah berlangganan newsletter kami.";

                }

                $resultElement.html(message);

              } else {
                $resultElement.html("Terima kasih telah berlangganan newsletter kami!");
              }
            }
          });
        }
      });
    </script>

    <script src="../../javascripts/bootstrap-notify.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $.notify(
        {
          // options
          icon: 'glyphicon glyphicon-warning-sign',
          title: '',
          message: '<b>Heads Up, New Improved Docs!</b><br> We recommend our brand new up-to-date, improved, & easier to understand documentation that will help you find what you need! <a href="https://beta-docs.midtrans.com">Click this banner to check it out!</a>',
          url: 'https://beta-docs.midtrans.com',
          target: '_blank'
        },
        {
          type: 'danger',
          delay: 0,
          placement: 
            { from: "top", align: "right" },
          offset: 
            { x: 50, y: 70 }
        }
      );
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  </body>
</html><!-- Veritrans.3.0-20150423 -->
